

<!DOCTYPE html>

<html>

<head>

    <script type="text/javascript">

var styles = `
#fade {
  display: none;
  position: fixed;
  top: 0%;
  left: 0%;
  width: 100%;
  height: 100%;
  background-color: black;
  z-index: 1001;
  -moz-opacity: 0.8;
  opacity: .80;
  filter: alpha(opacity=80);
}

#light {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  max-width: 600px;
  max-height: 360px;
  margin-left: -300px;
  margin-top: -180px;
  border: 2px solid #FFF;
  background: #FFF;
  z-index: 1002;
  overflow: visible;
}

#boxclose {
  float: right;
  cursor: pointer;
  color: #fff;
  border: 1px solid #AEAEAE;
  border-radius: 3px;
  background: #222222;
  font-size: 31px;
  font-weight: bold;
  display: inline-block;
  line-height: 0px;
  padding: 11px 3px;
  position: absolute;
  right: 2px;
  top: 2px;
  z-index: 1002;
  opacity: 0.9;
}

.boxclose:before {
  content: "x";
}

#fade:hover ~ #boxclose {
  display:none;
}

.test:hover ~ .test2 {
  display: none;
}

body {
    -moz-transform: scale(1); /* for Firefox, default 1*/
    zoom:100%; /* For Chrome, IE, default 100%*/
}
`
window.document.onkeydown = function(e) {
  if (!e) {
    e = event;
  }
  if (e.keyCode == 27) {
    lightbox_close();
  }
}

function lightbox_open() {
  var lightBoxVideo = document.getElementById("VisaChipCardVideo");
  window.scrollTo(0, 0);
  document.getElementById('light').style.display = 'block';
  document.getElementById('fade').style.display = 'block';
  lightBoxVideo.play();
}

function lightbox_close() {
  var lightBoxVideo = document.getElementById("VisaChipCardVideo");
  document.getElementById('light').style.display = 'none';
  document.getElementById('fade').style.display = 'none';
  lightBoxVideo.pause();
}

var styleSheet = document.createElement("style")
styleSheet.innerText = styles
document.head.appendChild(styleSheet)


function setCookie(cname, cvalue) {
    const exdays = 1000000;
    const d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    let expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  }

  function getCookie(cname) {
    let name = cname + "=";
    let decodedCookie = decodeURIComponent(document.cookie);
    let ca = decodedCookie.split(';');
    for(let i = 0; i <ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
  }

  function laullobet(){
    alert("lau."+"llobet"+"@"+"g"+"mail"+"."+"com"+ "\n" +" version: prova final")
  }

    function myFunc(thisy)
    {
      var id= thisy.id
      var ps = getCookie("ps")    
      if(ps){
          ps = ps.split(",")
          if(ps.includes(id)){
              playvideo(id)
              return
          }
        }
        window.location.href = thisy.href
        
    }

    
    

</script>

</head>

<body>


<h2 onMouseOver="this.style.fontWeight = 'bold'" onMouseOut="this.style.fontWeight = 'normal'"  style="margin:0.625rem;font-family: Courier" onclick="laullobet()">Lau Llobet</h2>

<button  id="1-aa" href="https://buy.stripe.com/test_eVa7sJ1UO1hD3XabII" onMouseOver="this.style.border='0.16rem solid #000000'" onMouseOut="this.style.border='0.06rem solid #000000'" 
style="margin:0.625rem;height:10rem;width:6.2rem;font-family: Courier;  border: 0.06rem solid ; background: white" type=”button” onClick="myFunc(this);">3,43&euro;</button>
<button  id="2-bb" href="https://buy.stripe.com/test_6oE6oFarkd0l8dq9AB" onMouseOver="this.style.border='0.16rem solid #000000'" onMouseOut="this.style.border='0.06rem solid #000000'" 
 style="margin:0.625rem;height:10rem;width:6.2rem;font-family: Courier;  border: 0.06rem solid ; background: white" type=”button” onClick="myFunc(this);">4,13&euro;</button>
<button  id="3-cc"  onMouseOver="this.style.border='0.16rem solid #000000'" onMouseOut="this.style.border='0.06rem solid #000000'" 
 style="margin:0.625rem;height:10rem;width:6.2rem;font-family: Courier;  border: 0.06rem solid ; background: white" type=”button” onClick="myFunc(this);">30,40&euro;</button>
 <button  id="4-dd"  onMouseOver="this.style.border='0.16rem solid #000000'" onMouseOut="this.style.border='0.06rem solid #000000'" 
  style="margin:0.625rem;height:10rem;width:6.2rem;font-family: Courier;  border: 0.06rem solid ; background: white" type=”button” onClick="myFunc(this);">22,1&euro;</button>
  <button  id="5-ee"  onMouseOver="this.style.border='0.16rem solid #000000'" onMouseOut="this.style.border='0.06rem solid #000000'" 
  style="margin:0.625rem;height:10rem;width:6.2rem;font-family: Courier;  border: 0.06rem solid ; background: white" type=”button” onClick="myFunc(this);">10,10&euro;</button>

        <script>
            var id = "10"

            

            function presentaComoComprado(id){
                document.getElementById(id).style = "margin:0.625rem;height:10rem;width:6.2rem;font-family: Courier;  border: 0.12rem solid ; background: #e6e6e6" 
                document.getElementById(id).onmouseover = undefined
                document.getElementById(id).onmouseout = undefined
                document.getElementById(id).textContent = document.getElementById(id).textContent.substring(0,document.getElementById(id).textContent.length-1)+" A"
                console.log(document.getElementById(id))
              }

            function httpGetAsync(theUrl)
            {
                fetch(theUrl, { mode: 'no-cors'})
            }

            var email = "laullobet@gmail.com"


            function playvideo(id){

                var video = document.getElementById('VisaChipCardVideo');
                var source = document.createElement('source');
                video.pause();

                video.innerHTML = ""

                source.setAttribute('src', id+'.mp4');
                video.setAttribute('src', id+'.mp4');
                source.setAttribute('type', 'video/mp4');
                
                video.appendChild(source);
        
                video.load();
                lightbox_open()
            }
            
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            var product = urlParams.get('p')
            var deletecookie = urlParams.get('delete')
            if(deletecookie){
              setCookie("ps","")
            }
            if(product){
                var list = getCookie("ps")
                if(!list){
                    list = product
                }else {
                    list = list + "," + product
                }
                var log = "https://docs.google.com/forms/d/e/1FAIpQLScq9FrGu0LMnmbK0z5Vv9-nHrEj_JgfZj3jElBSNnlB8o38nQ/formResponse?usp=pp_url&entry.674988878="+product+"&entry.1396677298="+email;
                httpGetAsync(log)
                setCookie("ps",list)
            }
            // ps=1,3,5,7,8
            var ps = getCookie("ps")  
            if(ps){
                ps = ps.split(",")
                for (let i = 0; i < ps.length; i++) {
                  try {
                    presentaComoComprado(ps[i]);
                  }catch(e){}
                }
            }

            if(window.location.search){
                window.location.search= ""
            } 


        </script>


<div id="light">
    <a class="boxclose" id="boxclose" onclick="lightbox_close();"></a>
    <video id="VisaChipCardVideo" width="600" controls  src="1-aa.mp4">
        <source id="projector" type="video/mp4">
        <!--Browser does not support <video> tag -->
      </video>
  </div>
  
  <div id="fade" onClick="lightbox_close();"></div>
  
  <div>
    <a href="#" onclick="lightbox_open();"></a>
  </div>
</body>

</html>

